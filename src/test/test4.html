<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
</head>
<body>

<div class="ace_layer ace_text-layer" style=""><div class="ace_line" role="option" style="height: 16px; top: 528px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_keyword">case</span><span> </span><span class="ace_string">'production'</span><span>:</span></div><div class="ace_line" role="option" style="height: 16px; top: 544px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">DEPLOY_NAME</span><span> </span><span class="ace_keyword ace_operator">=</span><span> </span><span class="ace_string">'pc-site-nuxt-online'</span></div><div class="ace_line" role="option" style="height: 16px; top: 560px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">DOCKER_FILE</span><span> </span><span class="ace_keyword ace_operator">=</span><span> </span><span class="ace_string">'Dockerfile'</span></div><div class="ace_line" role="option" style="height: 16px; top: 576px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_keyword">break</span></div><div class="ace_line" role="option" style="height: 16px; top: 592px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_keyword">default</span><span>:</span></div><div class="ace_line" role="option" style="height: 16px; top: 608px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_comment">// <span class="ace_cjk" style="width: 14.4024px;">放</span><span class="ace_cjk" style="width: 14.4024px;">置</span><span class="ace_cjk" style="width: 14.4024px;">一</span><span class="ace_cjk" style="width: 14.4024px;">个</span><span class="ace_cjk" style="width: 14.4024px;">错</span><span class="ace_cjk" style="width: 14.4024px;">误</span><span class="ace_cjk" style="width: 14.4024px;">提</span><span class="ace_cjk" style="width: 14.4024px;">示</span><span class="ace_cjk" style="width: 14.4024px;">，</span><span class="ace_cjk" style="width: 14.4024px;">表</span><span class="ace_cjk" style="width: 14.4024px;">示</span><span class="ace_cjk" style="width: 14.4024px;">未</span><span class="ace_cjk" style="width: 14.4024px;">知</span><span class="ace_cjk" style="width: 14.4024px;">的</span><span class="ace_cjk" style="width: 14.4024px;">环</span><span class="ace_cjk" style="width: 14.4024px;">境</span></span></div><div class="ace_line" role="option" style="height: 16px; top: 624px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">error</span><span> </span><span class="ace_string">"<span class="ace_cjk" style="width: 14.4024px;">未</span><span class="ace_cjk" style="width: 14.4024px;">知</span><span class="ace_cjk" style="width: 14.4024px;">的</span><span class="ace_cjk" style="width: 14.4024px;">部</span><span class="ace_cjk" style="width: 14.4024px;">署</span><span class="ace_cjk" style="width: 14.4024px;">环</span><span class="ace_cjk" style="width: 14.4024px;">境</span>: ${params.DEPLOY_ENVIRONMENT}"</span></div><div class="ace_line" role="option" style="height: 16px; top: 640px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span>}</span></div><div class="ace_line" role="option" style="height: 16px; top: 656px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_comment">// if (params.DEPLOY_ENVIRONMENT == '<span class="ace_cjk" style="width: 14.4024px;">生</span><span class="ace_cjk" style="width: 14.4024px;">产</span><span class="ace_cjk" style="width: 14.4024px;">环</span><span class="ace_cjk" style="width: 14.4024px;">境</span>') {</span></div><div class="ace_line" role="option" style="height: 16px; top: 672px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_comment">//     input id: 'UserConfirmation', message: '<span class="ace_cjk" style="width: 14.4024px;">当</span><span class="ace_cjk" style="width: 14.4024px;">前</span><span class="ace_cjk" style="width: 14.4024px;">部</span><span class="ace_cjk" style="width: 14.4024px;">署</span><span class="ace_cjk" style="width: 14.4024px;">为</span><span class="ace_cjk" style="width: 14.4024px;">生</span><span class="ace_cjk" style="width: 14.4024px;">产</span><span class="ace_cjk" style="width: 14.4024px;">环</span><span class="ace_cjk" style="width: 14.4024px;">境</span>', ok: '<span class="ace_cjk" style="width: 14.4024px;">继</span><span class="ace_cjk" style="width: 14.4024px;">续</span>',</span></div><div class="ace_line" role="option" style="height: 16px; top: 688px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_comment">//           parameters: [booleanParam(defaultValue: true, name: 'confirm', description: '<span class="ace_cjk" style="width: 14.4024px;">请</span><span class="ace_cjk" style="width: 14.4024px;">确</span><span class="ace_cjk" style="width: 14.4024px;">认</span><span class="ace_cjk" style="width: 14.4024px;">代</span><span class="ace_cjk" style="width: 14.4024px;">码</span><span class="ace_cjk" style="width: 14.4024px;">分</span><span class="ace_cjk" style="width: 14.4024px;">支</span><span class="ace_cjk" style="width: 14.4024px;">正</span><span class="ace_cjk" style="width: 14.4024px;">确</span><span class="ace_cjk" style="width: 14.4024px;">，</span><span class="ace_cjk" style="width: 14.4024px;">部</span><span class="ace_cjk" style="width: 14.4024px;">署</span><span class="ace_cjk" style="width: 14.4024px;">后</span><span class="ace_cjk" style="width: 14.4024px;">请</span><span class="ace_cjk" style="width: 14.4024px;">及</span><span class="ace_cjk" style="width: 14.4024px;">时</span><span class="ace_cjk" style="width: 14.4024px;">进</span><span class="ace_cjk" style="width: 14.4024px;">行</span><span class="ace_cjk" style="width: 14.4024px;">线</span><span class="ace_cjk" style="width: 14.4024px;">上</span><span class="ace_cjk" style="width: 14.4024px;">验</span><span class="ace_cjk" style="width: 14.4024px;">证</span><span class="ace_cjk" style="width: 14.4024px;">。</span>')]</span></div><div class="ace_line" role="option" style="height: 16px; top: 704px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_comment">// }</span></div><div class="ace_line" role="option" style="height: 16px; top: 720px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">echo</span><span> </span><span class="ace_string">"<span class="ace_cjk" style="width: 14.4024px;">部</span><span class="ace_cjk" style="width: 14.4024px;">署</span><span class="ace_cjk" style="width: 14.4024px;">环</span><span class="ace_cjk" style="width: 14.4024px;">境</span><span class="ace_cjk" style="width: 14.4024px;">选</span><span class="ace_cjk" style="width: 14.4024px;">择</span>: ${params.DEPLOY_ENVIRONMENT}"</span></div><div class="ace_line" role="option" style="height: 16px; top: 736px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span>}</span></div><div class="ace_line" role="option" style="height: 16px; top: 752px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span>}</span></div><div class="ace_line" role="option" style="height: 16px; top: 768px;"><span class="ace_indent-guide">    </span><span>    </span><span>}</span></div><div class="ace_line" role="option" style="height: 16px; top: 784px;"><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">stage</span><span>(</span><span class="ace_string">'<span class="ace_cjk" style="width: 14.4024px;">拉</span><span class="ace_cjk" style="width: 14.4024px;">取</span><span class="ace_cjk" style="width: 14.4024px;">代</span><span class="ace_cjk" style="width: 14.4024px;">码</span>'</span><span>)</span><span> </span><span>{</span></div><div class="ace_line" role="option" style="height: 16px; top: 800px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">steps</span><span> </span><span>{</span></div><div class="ace_line" role="option" style="height: 16px; top: 816px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_comment">// checkout([$class: 'GitSCM',</span></div><div class="ace_line" role="option" style="height: 16px; top: 832px;"><span>                   </span><span class="ace_comment">//           branches: [[name: "${BRANCH_TAG}"]],</span></div><div class="ace_line" role="option" style="height: 16px; top: 848px;"><span>                   </span><span class="ace_comment">//           gitTool: 'Default',</span></div><div class="ace_line" role="option" style="height: 16px; top: 864px;"><span>                   </span><span class="ace_comment">//           userRemoteConfigs: [[url: 'git@legitlab.letv.cn:gfe/pc-site.git',credentialsId: 'b3bcd45d-9454-4f4c-ac09-308bea161515',]]</span></div><div class="ace_line" role="option" style="height: 16px; top: 880px;"><span>                   </span><span class="ace_comment">//         ])</span></div><div class="ace_line" role="option" style="height: 16px; top: 896px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">sh</span><span> </span><span class="ace_string">'rm -fr ./.git'</span></div><div class="ace_line" role="option" style="height: 16px; top: 912px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">git</span><span> </span><span class="ace_identifier">branch</span><span>: </span><span class="ace_string">"${Branch}"</span><span>, </span><span class="ace_identifier">url</span><span>: </span><span class="ace_string">"git@legitlab.letv.cn:gfe/pc-site-nuxt.git"</span><span>,</span><span class="ace_identifier">credentialsId</span><span>: </span><span class="ace_string">'b3bcd45d-9454-4f4c-ac09-308bea161515'</span></div><div class="ace_line" role="option" style="height: 16px; top: 928px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span>}</span></div><div class="ace_line" role="option" style="height: 16px; top: 944px;"><span class="ace_indent-guide">    </span><span>    </span><span>}</span></div><div class="ace_line" role="option" style="height: 16px; top: 960px;"><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">stage</span><span>(</span><span class="ace_string">'<span class="ace_cjk" style="width: 14.4024px;">安</span><span class="ace_cjk" style="width: 14.4024px;">装</span>&amp;&amp;<span class="ace_cjk" style="width: 14.4024px;">编</span><span class="ace_cjk" style="width: 14.4024px;">译</span>'</span><span>)</span><span> </span><span>{</span></div><div class="ace_line" role="option" style="height: 16px; top: 976px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">steps</span><span> </span><span>{</span></div><div class="ace_line" role="option" style="height: 16px; top: 992px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">sh</span><span> </span><span class="ace_string">"node -v"</span></div><div class="ace_line" role="option" style="height: 16px; top: 1008px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">sh</span><span> </span><span class="ace_string">"/usr/local/node/bin/npm install --registry=https://mirrors.cloud.tencent.com/npm/ &amp;&amp; /usr/local/bin/npm run build &amp;&amp; cp -rfv ./dist ./build/docker &amp;&amp; pwd &amp;&amp; ls ./dist/ ; ls ./build/docker"</span></div><div class="ace_line" role="option" style="height: 16px; top: 1024px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span>}</span></div><div class="ace_line" role="option" style="height: 16px; top: 1040px;"><span class="ace_indent-guide">    </span><span>    </span><span>}</span></div><div class="ace_line" role="option" style="height: 16px; top: 1056px;"><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">stage</span><span>(</span><span class="ace_string">'Build Docker <span class="ace_cjk" style="width: 14.4024px;">镜</span><span class="ace_cjk" style="width: 14.4024px;">像</span>'</span><span>)</span><span> </span><span>{</span></div><div class="ace_line" role="option" style="height: 16px; top: 1072px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">steps</span><span> </span><span>{</span></div><div class="ace_line" role="option" style="height: 16px; top: 1088px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">sh</span><span> </span><span class="ace_string">"ls ./ ; ls ./dist/"</span></div><div class="ace_line" role="option" style="height: 16px; top: 1104px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_comment">// git branch: "${CHECKOUT_TAG}", url: "${CHECKOUT_REPO}",credentialsId: '02274ff2-28cd-407b-813d-ec31d777b98d'</span></div><div class="ace_line" role="option" style="height: 16px; top: 1120px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">dir</span><span>(</span><span class="ace_string">"${WORKSPACE}/build/docker"</span><span>)</span><span>{</span></div><div class="ace_line" role="option" style="height: 16px; top: 1136px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">sh</span><span> </span><span class="ace_string">"node -v"</span></div><div class="ace_line" role="option" style="height: 16px; top: 1152px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">sh</span><span> </span><span class="ace_string">"/usr/local/bin/npm install --registry=https://mirrors.cloud.tencent.com/npm/"</span></div><div class="ace_line" role="option" style="height: 16px; top: 1168px;"><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span><span>    </span><span class="ace_identifier">withDockerRegistry</span><span>(</span><span class="ace_identifier">credentialsId</span><span>: </span><span class="ace_string">'fde83d5a-db61-4dfa-bab6-0c5d4f83fa50'</span><span>, </span><span class="ace_identifier">url</span><span>: </span><span class="ace_string">'https://reg-sre.lecloud.com'</span><span>)</span><span> </span><span>{</span></div></div>
</body>
</html>
